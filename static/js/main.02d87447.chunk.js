(window["webpackJsonpshop-list"]=window["webpackJsonpshop-list"]||[]).push([[0],{62:function(e,t,n){e.exports=n(79)},79:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),c=n.n(o),i=n(57),l=n(122),u=n(116),s=n(10),m=n(2),f=n(12);function p(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={items:{state:{},reducer:function(e,t){var n=t.action,r=t.payload;switch(n){case"set":return r instanceof Array?r.reduce(function(e,t){return d({},e,Object(f.a)({},t.id,t))},e):d({},e,Object(f.a)({},r.id,r));case"unset":var a=r.id;e[a];return Object(m.a)(e,[a].map(p));default:return e}}},filter:{state:{name:"",isBuying:!1},reducer:function(e,t){return d({},e,{},t)}},isDrawerOpen:{state:!1,reducer:function(e){return!e}}},O=n(104),v=n(105),y=n(49),j=Object(y.a)(function(e){return{root:{display:"flex",alignItems:"center"},button:{margin:e.spacing(2),marginLeft:"auto"}}}),h=a.a.memo(function(){var e=j();return a.a.createElement("div",{className:e.root},a.a.createElement(O.a,{className:e.button,size:"medium"},a.a.createElement(v.a,null)))}),w=n(119),E=n(108),k=n(107),S=n(81),P=n(117),C=n(110),D=n(111),I=n(109),B=n(112),N=n(24),x=n(19),A=new(n(55).a)("Database");A.version(1).stores({items:"id",settings:"id"});var R=A;var T=function(){var e=Object(s.useStore)("items",!0);return{addItem:Object(r.useCallback)(function(t){R.items.put(t),e({action:"set",payload:t})},[e]),deleteItem:Object(r.useCallback)(function(t){R.items.delete(t.id),e({action:"unset",payload:t})},[e])}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var L=function(){var e=Object(s.useStore)("filter"),t=Object(x.a)(e,2),n=t[0],a=t[1],o=Object(s.useStore)("items"),c=Object(x.a)(o,1)[0],i=Object(r.useState)([]),l=Object(x.a)(i,2),u=l[0],m=l[1],p=T(),b=p.addItem,d=p.deleteItem,g=Object(r.useState)(),O=Object(x.a)(g,2),v=O[0],y=O[1];Object(r.useEffect)(function(){var e=new RegExp(n.name,"i"),t=Object.values(c).reduce(function(t,r){return!r.name.match(e)||n.isBuying&&r.inStock?t:[].concat(Object(N.a)(t),[r])},[]).sort(function(e,t){return e.name.localeCompare(t.name)});!t.length&&n.isBuying&&a({isBuying:!1}),m(t)},[c,n,a]);var j=Object(r.useCallback)(function(e){var t=c[e.currentTarget.getAttribute("name")];b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{inStock:!t.inStock}))},[c,b]),h=Object(r.useCallback)(function(e){y(e.currentTarget)},[]),w=Object(r.useCallback)(function(){y()},[]),E=Object(r.useCallback)(function(){v&&(d(c[v.getAttribute("name")]),w())},[d,c,v,w]);return{items:u,updateStock:j,openMenu:h,closeMenu:w,anchor:v,removeItem:E}},M=Object(y.a)(function(e){return{root:{paddingTop:0,flex:1,overflow:"auto"}}}),z=a.a.memo(function(){var e=M(),t=L(),n=t.items,r=t.updateStock,o=t.openMenu,c=t.closeMenu,i=t.anchor,l=t.removeItem;return a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,{name:"menu",anchorEl:i,onClose:c,open:!!i},a.a.createElement(E.a,{onClick:l},"Eliminar")),a.a.createElement(k.a,{className:e.root},n.map(function(e){return a.a.createElement(S.a,{button:!0,key:e.id,name:e.id,onClick:r},a.a.createElement(P.a,{color:"primary",disableRipple:!0,checked:e.inStock}),a.a.createElement(C.a,{primary:e.name}),a.a.createElement(D.a,null,a.a.createElement(I.a,{onClick:o,name:e.id},a.a.createElement(B.a,null))))})))}),F=n(106),K=n(120),U=n(113),J=n(114),$=Object(y.a)(function(e){return{root:{display:"flex",alignItems:"center",margin:e.spacing(2),padding:e.spacing(.75)},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1)},addIcon:{padding:e.spacing(0)},menuIcon:{padding:e.spacing(1)}}});var q=function(e){var t=e.name;return{id:t.toLowerCase(),name:t,inStock:!1}};var G=function(){var e=Object(s.useStore)("filter"),t=Object(x.a)(e,2),n=t[0],a=t[1],o=T().addItem,c=Object(s.useStore)("isDrawerOpen",!0),i=Object(r.useCallback)(function(e){a({name:e.target.value})},[a]),l=Object(r.useCallback)(function(){n.name&&(o(q({name:n.name})),a({name:""}))},[a,o,n]),u=Object(r.useCallback)(function(e){"Enter"===e.key&&l()},[l]);return{filter:n,updateFilter:i,addItem:l,toggleOpen:c,handleKeyDown:u}},H=a.a.memo(function(){var e=$(),t=G(),n=t.filter,r=t.updateFilter,o=t.addItem,c=t.toggleOpen,i=t.handleKeyDown,l=n.name;return a.a.createElement(F.a,{className:e.root},a.a.createElement(I.a,{className:e.menuIcon,onClick:c},a.a.createElement(U.a,null)),a.a.createElement(K.a,{value:l,onKeyDown:i,onChange:r,className:e.input,placeholder:"Producto"}),a.a.createElement(I.a,{onClick:o,disabled:!l,className:e.addIcon},a.a.createElement(J.a,{fontSize:"large"})))}),Q=n(121),V=n(39),X=n(115),Y=Object(y.a)(function(e){return{title:{padding:e.spacing(2)},item:{paddingRight:e.spacing(10)}}});var Z=function(){var e=Object(s.useStore)("filter"),t=Object(x.a)(e,2),n=t[0],a=t[1],o=Object(s.useStore)("isDrawerOpen"),c=Object(x.a)(o,2),i=c[0],l=c[1];return{toggleBuying:Object(r.useCallback)(function(){l(),a({isBuying:!n.isBuying})},[a,l,n]),isOpen:i,toggleOpen:l,isBuying:n.isBuying}},_=a.a.memo(function(){var e=Y(),t=Z(),n=t.isOpen,r=t.toggleOpen,o=t.toggleBuying,c=t.isBuying;return a.a.createElement(Q.a,{open:n,onClose:function(){return r()}},a.a.createElement(V.a,{variant:"h6",className:e.title},"Shop List"),a.a.createElement(X.a,null),a.a.createElement(k.a,null,a.a.createElement(S.a,{button:!0,className:e.item,onClick:o},a.a.createElement(C.a,{primary:"".concat(c?"Terminar":"Empezar"," compra")}))))});function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ne=Object(y.a)(function(e){return{root:te({},e.typography.body1,{position:"absolute",height:"100%",width:"100%",display:"flex",flexDirection:"column"})}}),re=n(43),ae=n.n(re),oe=n(56);var ce=function(){var e=Object(s.useStore)("items",!0);Object(r.useEffect)(function(){function t(){return(t=Object(oe.a)(ae.a.mark(function t(){var n;return ae.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.items.toArray();case 2:n=t.sent,e({action:"set",payload:n});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e])},ie=a.a.memo(function(){var e=ne();return ce(),a.a.createElement("div",{className:e.root},a.a.createElement(_,null),a.a.createElement(H,null),a.a.createElement(z,null),a.a.createElement(h,null))}),le=Object(i.a)({spacing:function(e){return"".concat(.5*e,"rem")}}),ue=function(){return a.a.createElement(s.Store,{reducers:g},a.a.createElement(l.a,{theme:le},a.a.createElement(u.a,null),a.a.createElement(ie,null)))},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(a.a.createElement(ue,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/shop-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/shop-list","/service-worker.js");se?(!function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):me(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):me(t,e)})}}()}},[[62,1,2]]]);
//# sourceMappingURL=main.02d87447.chunk.js.map