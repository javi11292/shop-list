(window["webpackJsonpshop-list"]=window["webpackJsonpshop-list"]||[]).push([[0],{58:function(e,t,n){e.exports=n(75)},75:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),c=n.n(o),i=n(52),u=n(116),s=n(109),l=n(12),f=n(2),m=n(10);function p(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(m.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={items:{state:{},reducer:function(e,t){var n=t.action,r=t.payload;switch(n){case"set":return r instanceof Array?r.reduce(function(e,t){return d({},e,Object(m.a)({},t.id,t))},e):d({},e,Object(m.a)({},r.id,r));case"unset":var a=r.id;e[a];return Object(f.a)(e,[a].map(p));default:return e}}},filter:{state:{name:"",isBuying:!1},reducer:function(e,t){return d({},e,{},t)}}},O=n(115),y=n(99),v=n(100),j=n(101),h=n(15),w=n(45),E=Object(w.a)(function(e){return{root:{display:"flex",alignItems:"center"},button:{margin:e.spacing(2),marginLeft:"auto",color:function(e){return e.isBuying?"red":"green"}}}});var k=function(){var e=Object(l.useStore)("filter"),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(r.useCallback)(function(){a({isBuying:!n.isBuying})},[a,n]),c=E({isBuying:n.isBuying});return{toggleBuying:o,isBuying:n.isBuying,classes:c}},S=a.a.memo(function(){var e=k(),t=e.toggleBuying,n=e.isBuying,r=e.classes;return a.a.createElement("div",{className:r.root},a.a.createElement(O.a,{title:"".concat(n?"Terminar":"Empezar"," compra")},a.a.createElement(y.a,{className:r.button,size:"medium",onClick:t},n?a.a.createElement(v.a,null):a.a.createElement(j.a,null))))}),P=n(110),C=n(104),B=n(103),D=n(77),x=n(111),I=n(114),A=n(106),N=n(105),F=n(107),W=n(19),T=new(n(50).a)("Database");T.version(1).stores({items:"id",settings:"id"});var R=T;var L=function(){var e=Object(l.useStore)("items",!0);return{addItem:Object(r.useCallback)(function(t){R.items.put(t),e({action:"set",payload:t})},[e]),deleteItem:Object(r.useCallback)(function(t){R.items.delete(t.id),e({action:"unset",payload:t})},[e])}};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var z=function(){var e=Object(l.useStore)("filter"),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(l.useStore)("items"),c=Object(h.a)(o,1)[0],i=Object(r.useState)([]),u=Object(h.a)(i,2),s=u[0],f=u[1],p=L(),b=p.addItem,d=p.deleteItem,g=Object(r.useState)(),O=Object(h.a)(g,2),y=O[0],v=O[1];Object(r.useEffect)(function(){var e=new RegExp(n.name,"i"),t=Object.values(c).reduce(function(t,r){return!r.name.match(e)||n.isBuying&&r.inStock?t:[].concat(Object(W.a)(t),[r])},[]).sort(function(e,t){return e.name.localeCompare(t.name)});!t.length&&n.isBuying&&a({isBuying:!1}),f(t)},[c,n,a]);var j=Object(r.useCallback)(function(e){var t=c[e.currentTarget.getAttribute("name")];b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){Object(m.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{inStock:!t.inStock}))},[c,b]),w=Object(r.useCallback)(function(e){v(e.currentTarget)},[]),E=Object(r.useCallback)(function(){v()},[]),k=Object(r.useCallback)(function(){y&&(d(c[y.getAttribute("name")]),E())},[d,c,y,E]);return{items:s,updateStock:j,openMenu:w,closeMenu:E,anchor:y,removeItem:k}},K=Object(w.a)(function(e){return{root:{paddingTop:0,flex:1,overflow:"auto"}}}),U=a.a.memo(function(){var e=K(),t=z(),n=t.items,r=t.updateStock,o=t.openMenu,c=t.closeMenu,i=t.anchor,u=t.removeItem;return a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,{name:"menu",anchorEl:i,onClose:c,open:!!i},a.a.createElement(C.a,{onClick:u},"Eliminar")),a.a.createElement(B.a,{className:e.root},n.map(function(e){return a.a.createElement(D.a,{button:!0,key:e.id,name:e.id,onClick:r},a.a.createElement(x.a,{color:"primary",disableRipple:!0,checked:e.inStock}),a.a.createElement(I.a,{primary:e.name}),a.a.createElement(A.a,null,a.a.createElement(N.a,{onClick:o,name:e.id},a.a.createElement(F.a,null))))})))}),J=n(102),$=n(112),q=n(108);var G=function(e){var t=e.name;return{id:t.toLowerCase(),name:t,inStock:!1}},H=Object(w.a)(function(e){return{root:{display:"flex",alignItems:"center",margin:e.spacing(2),padding:e.spacing(.75),border:function(t){return"1px solid ".concat(t.hasFocus?e.palette.primary.main:"transparent")},"&:hover":{border:"1px solid ".concat(e.palette.primary.main)}},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1)},addIcon:{padding:e.spacing(0),color:"green"}}});var Q=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(l.useStore)("filter"),c=Object(h.a)(o,2),i=c[0],u=c[1],s=L().addItem,f=Object(r.useCallback)(function(e){u({name:e.target.value})},[u]),m=Object(r.useCallback)(function(){i.name&&(s(G({name:i.name})),u({name:""}))},[u,s,i]),p=Object(r.useCallback)(function(e){"Enter"===e.key&&m()},[m]),b=Object(r.useCallback)(function(e){return function(){return a(e)}},[]),d=H({hasFocus:n});return{filter:i,updateFilter:f,addItem:m,handleKeyDown:p,updateFocus:b,classes:d}},V=a.a.memo(function(){var e=Q(),t=e.filter,n=e.updateFilter,r=e.addItem,o=e.handleKeyDown,c=e.classes,i=e.updateFocus,u=t.name;return a.a.createElement(J.a,{className:c.root},a.a.createElement($.a,{value:u,onKeyDown:o,onFocus:i(!0),onBlur:i(!1),onChange:n,className:c.input,placeholder:"A\xf1adir producto"}),a.a.createElement(N.a,{onClick:r,disabled:!u,className:c.addIcon},a.a.createElement(q.a,{fontSize:"large"})))});function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){Object(m.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Z=Object(w.a)(function(e){return{root:Y({},e.typography.body1,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",height:"100%",width:"100%",display:"flex",flexDirection:"column",maxWidth:e.spacing(100)})}}),_=n(37),ee=n.n(_),te=n(51);var ne=function(){var e=Object(l.useStore)("items",!0);Object(r.useEffect)(function(){function t(){return(t=Object(te.a)(ee.a.mark(function t(){var n;return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.items.toArray();case 2:n=t.sent,e({action:"set",payload:n});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e])},re=a.a.memo(function(){var e=Z();return ne(),a.a.createElement("div",{className:e.root},a.a.createElement(V,null),a.a.createElement(U,null),a.a.createElement(S,null))}),ae=Object(i.a)({spacing:function(e){return"".concat(.5*e,"rem")}}),oe=function(){return a.a.createElement(l.Store,{reducers:g},a.a.createElement(u.a,{theme:ae},a.a.createElement(s.a,null),a.a.createElement(re,null)))},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(a.a.createElement(oe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/shop-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/shop-list","/service-worker.js");ce?(!function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ie(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ie(t,e)})}}()}},[[58,1,2]]]);
//# sourceMappingURL=main.491d6972.chunk.js.map