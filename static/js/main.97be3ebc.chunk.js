(window["webpackJsonpshop-list"]=window["webpackJsonpshop-list"]||[]).push([[0],{62:function(e,t,n){e.exports=n(81)},81:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),i=n.n(o),c=n(55),s=n(122),u=n(115),l=n(12),m=n(2),f=n(10);function p(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={items:{state:{},reducer:function(e,t){var n=t.action,r=t.payload;switch(n){case"set":return r instanceof Array?r.reduce(function(e,t){return b({},e,Object(f.a)({},t.id,t))},e):b({},e,Object(f.a)({},r.id,r));case"unset":var a=r.id;e[a];return Object(m.a)(e,[a].map(p));default:return e}}},filter:{state:{name:"",isBuying:!1},reducer:function(e,t){return b({},e,{},t)}}},O=n(119),y=n(104),v=n(105),j=n(106),h=n(14),w=n(46),E=Object(w.a)(function(e){return{root:{display:"flex",alignItems:"center"},button:{margin:e.spacing(2),marginLeft:"auto",color:function(e){return e.isBuying?"red":"green"}}}});var k=function(){var e=Object(l.useStore)("filter"),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(r.useCallback)(function(){a({isBuying:!n.isBuying})},[a,n]),i=E({isBuying:n.isBuying});return{toggleBuying:o,isBuying:n.isBuying,classes:i}},S=a.a.memo(function(){var e=k(),t=e.toggleBuying,n=e.isBuying,r=e.classes;return a.a.createElement("div",{className:r.root},a.a.createElement(O.a,{title:"".concat(n?"Terminar":"Empezar"," compra")},a.a.createElement(y.a,{className:r.button,size:"medium",onClick:t},n?a.a.createElement(v.a,null):a.a.createElement(j.a,null))))}),P=n(116),B=n(110),C=n(109),x=n(83),D=n(117),I=n(121),N=n(112),A=n(111),F=n(113),W=n(123),R=n(107),T=a.a.memo(function(e){var t=e.isEnabled,n=e.item,r=e.classes,o=e.timeout,i=e.children,c=Object(m.a)(e,["isEnabled","item","classes","timeout","children"]);return a.a.createElement(R.a,Object.assign({},c,{key:n.id,classNames:{exit:t?r.exit:void 0},timeout:t?o:0}),i)}),L=n(20),M=new(n(53).a)("Database");M.version(1).stores({items:"id",settings:"id"});var z=M;var K=function(){var e=Object(l.useStore)("items",!0);return{addItem:Object(r.useCallback)(function(t){z.items.put(t),e({action:"set",payload:t})},[e]),deleteItem:Object(r.useCallback)(function(t){z.items.delete(t.id),e({action:"unset",payload:t})},[e])}},U=300,J=Object(w.a)(function(e){return{root:{paddingTop:0,flex:1,overflow:"auto"},exit:{transform:"scale(0)",transition:"transform ".concat(U,"ms")},hidden:{visibility:"hidden",width:0,paddingLeft:0,paddingRight:0}}});function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var q=function(){var e=Object(l.useStore)("filter"),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(l.useStore)("items"),i=Object(h.a)(o,1)[0],c=Object(r.useState)([]),s=Object(h.a)(c,2),u=s[0],m=s[1],p=K(),d=p.addItem,b=p.deleteItem,g=Object(r.useState)(),O=Object(h.a)(g,2),y=O[0],v=O[1],j=Object(r.useState)(n.isBuying),w=Object(h.a)(j,2),E=w[0],k=w[1];Object(r.useEffect)(function(){var e=new RegExp(n.name,"i"),t=Object.values(i).reduce(function(t,r){return!r.name.match(e)||n.isBuying&&r.inStock?t:[].concat(Object(L.a)(t),[r])},[]).sort(function(e,t){return e.name.localeCompare(t.name)});!t.length&&n.isBuying&&a({isBuying:!1}),m(t),k(n.isBuying)},[i,n,a]);var S=Object(r.useCallback)(function(e){var t=i[e.currentTarget.getAttribute("name")];d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{inStock:!t.inStock}))},[i,d]),P=Object(r.useCallback)(function(e){v(e.currentTarget)},[]),B=Object(r.useCallback)(function(){v()},[]),C=Object(r.useCallback)(function(){y&&(b(i[y.getAttribute("name")]),B())},[b,i,y,B]),x=J({isBuying:n.isBuying});return{items:u,updateStock:S,openMenu:P,closeMenu:B,anchor:y,removeItem:C,classes:x,timeout:U,isBuying:E}},G=a.a.memo(function(){var e=q(),t=e.items,n=e.updateStock,r=e.openMenu,o=e.closeMenu,i=e.anchor,c=e.removeItem,s=e.classes,u=e.timeout,l=e.isBuying;return a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,{name:"menu",anchorEl:i,onClose:o,open:!!i},a.a.createElement(B.a,{onClick:c},"Eliminar")),a.a.createElement(C.a,{className:s.root},a.a.createElement(W.a,{component:null},t.map(function(e){return a.a.createElement(T,{isEnabled:!e.inStock&&l,key:e.id,item:e,classes:s,timeout:u},a.a.createElement(x.a,{button:!0,name:e.id,onClick:n},a.a.createElement(D.a,{className:l?s.hidden:void 0,color:"primary",disableRipple:!0,checked:e.inStock}),a.a.createElement(I.a,{primary:e.name}),a.a.createElement(N.a,null,a.a.createElement(A.a,{onClick:r,name:e.id},a.a.createElement(F.a,null)))))}))))}),H=n(108),Q=n(118),V=n(114);var X=function(e){var t=e.name;return{id:t.toLowerCase(),name:t,inStock:!1}},Y=Object(w.a)(function(e){return{root:{display:"flex",alignItems:"center",margin:e.spacing(2),padding:e.spacing(.75),border:function(t){return"1px solid ".concat(t.hasFocus?e.palette.primary.main:"transparent")},"&:hover":{border:"1px solid ".concat(e.palette.primary.main)}},input:{flex:1,marginLeft:e.spacing(1),marginRight:e.spacing(1)},addIcon:{padding:e.spacing(0),color:"green"}}});var Z=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],o=Object(l.useStore)("filter"),i=Object(h.a)(o,2),c=i[0],s=i[1],u=K().addItem,m=Object(r.useCallback)(function(e){s({name:e.target.value})},[s]),f=Object(r.useCallback)(function(){c.name&&(u(X({name:c.name})),s({name:""}))},[s,u,c]),p=Object(r.useCallback)(function(e){"Enter"===e.key&&f()},[f]),d=Object(r.useCallback)(function(e){return function(){return a(e)}},[]),b=Y({hasFocus:n});return{filter:c,updateFilter:m,addItem:f,handleKeyDown:p,updateFocus:d,classes:b}},_=a.a.memo(function(){var e=Z(),t=e.filter,n=e.updateFilter,r=e.addItem,o=e.handleKeyDown,i=e.classes,c=e.updateFocus,s=t.name;return a.a.createElement(H.a,{className:i.root},a.a.createElement(Q.a,{value:s,onKeyDown:o,onFocus:c(!0),onBlur:c(!1),onChange:n,className:i.input,placeholder:"A\xf1adir producto"}),a.a.createElement(A.a,{onClick:r,disabled:!s,className:i.addIcon},a.a.createElement(V.a,{fontSize:"large"})))});function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach(function(t){Object(f.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ne=Object(w.a)(function(e){return{root:te({},e.typography.body1,{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",height:"100%",width:"100%",display:"flex",flexDirection:"column",maxWidth:e.spacing(100)})}}),re=n(38),ae=n.n(re),oe=n(54);var ie=function(){var e=Object(l.useStore)("items",!0);Object(r.useEffect)(function(){function t(){return(t=Object(oe.a)(ae.a.mark(function t(){var n;return ae.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.items.toArray();case 2:n=t.sent,e({action:"set",payload:n});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e])},ce=a.a.memo(function(){var e=ne();return ie(),a.a.createElement("div",{className:e.root},a.a.createElement(_,null),a.a.createElement(G,null),a.a.createElement(S,null))}),se=Object(c.a)({spacing:function(e){return"".concat(.5*e,"rem")}}),ue=function(){return a.a.createElement(l.Store,{reducers:g},a.a.createElement(s.a,{theme:se},a.a.createElement(u.a,null),a.a.createElement(ce,null)))},le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(a.a.createElement(ue,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/shop-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/shop-list","/service-worker.js");le?(!function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):me(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):me(t,e)})}}()}},[[62,1,2]]]);
//# sourceMappingURL=main.97be3ebc.chunk.js.map